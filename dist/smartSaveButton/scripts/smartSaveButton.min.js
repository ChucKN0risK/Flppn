chrome.storage.sync.get(function(t){token=t.id_token;var e=document.querySelector("#player")||document.querySelector("#videoWrapper");e&&smartSaveButton(e)}),chrome.storage.onChanged.addListener(function(t){token=t.id_token});var smartSaveButton=function(t){return this.$wrapper=t,SmartSaveButton.init(t),SmartSaveButton.events(),smartSaveButton},SmartSaveButton={events:function(){},openSmartSaveMenu:function(){getToken(function(){smartSaveMenu.getUserCollections(),smartSaveMenu.toggle()})},showElement:function(){_this=this;var t=document.querySelector("#smartSaveButtonHost").createShadowRoot(),e=document.querySelector("#smartSaveButtonTemplate"),n=document.importNode(e.content,!0);t.appendChild(n);var o=t.querySelector("button");return o.addEventListener("click",function(t){_this.openSmartSaveMenu()}),t},init:function(t){var e=new XMLHttpRequest;e.open("GET",chrome.extension.getURL("smartSaveButton/smartSaveButton.html"),!0),e.onload=function(){var e=document.createElement("div");e.style.zIndex="858575959",e.style.position="absolute",e.style.top="10px",e.style.left="10px",e.innerHTML=this.responseText,t.insertBefore(e,t.firstChild),SmartSaveButton.showElement()},e.send()}};